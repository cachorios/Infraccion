{% extends '::layout.html.twig' %}
{% block id 'mod_Infraccion' %}
    {% block title %}
        {{ parent() }} - Infracciones
    {% endblock %}

    {% block page %}

        <section id="Infraccion">

            {% form_theme filterForm with ['LexikFormFilterBundle:Form:form_div_layout.html.twig' ] %}

            {% embed 'box.html.twig' with {'box_titulo': 'Lista de Infracciones' } %}
                {% block rigth_title %}
                    <a class="btn dropdown-toggle btn-mini" data-toggle="collapse"
                       data-target="#filters">
                        {{ 'views.index.filters'|trans({}, 'JordiLlonchCrudGeneratorBundle') }}
                        <span class="caret"></span>
                    </a> &nbsp;
                {% endblock %}

                {% block box_contenido %}
                    <div class="row-fluid">
                        <div class="span12" style="margin-top: 0;">
                            {{ wo_render_breadcrumbs() }}

                            {% for type, flashMessages in app.session.flashbag.all() %}
                                {% for flashMessage in flashMessages %}
                                    <div class='alert alert-{{ type }}'>
                                        {{ flashMessage|trans({}, 'JordiLlonchCrudGeneratorBundle') }}
                                    </div>
                                {% endfor %}
                            {% endfor %}
                        </div>
                    </div>

                    {% if form_errors(filterForm) %}
                        <div class="alert alert-block alert-error fade in form-errors">
                            {{ form_errors(filterForm) }}
                        </div>
                    {% endif %}
                    &nbsp;

                    <div id="filters" class="collapse">
                        <form class="well" action="{{ path('infraccion') }}"
                              method="post" {{ form_enctype(filterForm) }}>
                            {{ form_row(filterForm.dominio) }}
                            {{ form_row(filterForm.municipio) }}
                            {#{{ form_row(filterForm.ubicacion) }}#}
                            {#{{ form_row(filterForm.tipo_infraccion) }}#}
                            {{ form_row(filterForm.fecha) }}
                            {{ form_row(filterForm.etapa) }}

                            {{ form_rest(filterForm) }}

                            <p>
                                <button type="submit" name="filter_action"
                                        value="reset">{{ 'views.index.reset'|trans({}, 'JordiLlonchCrudGeneratorBundle') }}</button>
                                <button type="submit" name="filter_action"
                                        value="filter">{{ 'views.index.filter'|trans({}, 'JordiLlonchCrudGeneratorBundle') }}</button>
                            </p>
                        </form>
                    </div>

                    <div class="row-fluid" style="margin-top: 0;">
                        <div class="span12" style="zoom: 1; overflow: auto; margin-top: -8px;">

                            <table class="table table-striped table-bordered table-condensed">
                                <thead>
                                <tr>
                                    {#<th>Municipio</th>#}
                                    {#<th>Ubicacion</th>#}
                                    {#<th>Infraccion</th>#}
                                    <th>Dominio</th>
                                    <th>fecha</th>
                                    <th>Foto 1</th>
                                    <th>Foto 2</th>
                                    <th>Foto 3</th>
                                    <th>Etapa</th>


                                    <th>{{ 'views.index.actions'|trans({}, 'JordiLlonchCrudGeneratorBundle') }}</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for entity in entities %}
                                <tr>
                                {#<td>#}
                                {#&#123;&#35;<a href="{{ path('infraccion_show', { 'id': entity.id }) }}">{{ entity.codigo }}</a>&#35;&#125;#}
                                {#{{ entity.municipio }}#}
                                {#</td>#}
                                {#<td>{{ entity.ubicacion }}</td>#}
                                {#<td>{{ entity.tipoInfraccion }}</td>#}
                                <td>{{ entity.dominio }}</td>
                                <td>{% if entity.fecha %}{{ entity.fecha|date('d-m-Y H:i:s') }}{% endif %}</td>
                                <td><img src="{{ asset('infracciones/'~ entity.fecha| date('Ym') ~ '/' ~ entity.foto1) }}" /> </td>
                                    <td><img src="{{ asset('infracciones/'~ entity.fecha| date('Ym') ~ '/' ~ entity.foto2) }}" /> </td>
                                    <td><img src="{{ asset('infracciones/'~ entity.fecha| date('Ym') ~ '/' ~ entity.foto3) }}" /> </td>
                                <td>{{ entity.etapa }}</td>

                                <td>
                                <a class="btn btn-mini" href="{{ path('infraccion_show', { 'id': entity.id }) }}">
                                {{ 'views.actions.show'|trans({}, 'JordiLlonchCrudGeneratorBundle') }}
                                </a>
                                <a class="btn btn-mini" href="{{ path('infraccion_edit', { 'id': entity.id }) }}">
                                {{ 'views.actions.edit'|trans({}, 'JordiLlonchCrudGeneratorBundle') }}
                                </a>                            </td>
                                </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="row-fluid">

                        <div class="span10">
                            {{ pagerHtml|raw }}
                        </div>

                        <div class="span2">
                            <a class="btn btn-primary likepaginator" href="{{ path('infraccion_new') }}">
                                {{ 'views.index.createnew'|trans({}, 'JordiLlonchCrudGeneratorBundle') }} Infraccion
                            </a>
                        </div>
                    </div>

                {% endblock box_contenido %}
            {% endembed %}


        </section>


    {% endblock %}