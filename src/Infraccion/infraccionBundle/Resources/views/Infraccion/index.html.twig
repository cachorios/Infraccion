{% extends '::layout.html.twig' %}
{% block id 'mod_Infraccion' %}
    {% block title %}
        {{ parent() }} - Infracciones
    {% endblock %}

    {% block page %}

        <section id="Infraccion">

        {% form_theme filterForm with ['LexikFormFilterBundle:Form:form_div_layout.html.twig' ] %}

        {% embed 'box.html.twig' with {'box_titulo': 'Lista de Infracciones' } %}
            {% block rigth_title %}
                <a class="btn dropdown-toggle btn-mini" data-toggle="collapse"
                   data-target="#filters">
                    {{ 'views.index.filters'|trans({}, 'JordiLlonchCrudGeneratorBundle') }}
                    <span class="caret"></span>
                </a> &nbsp;
            {% endblock %}

            {% block box_contenido %}
                <div class="row-fluid">
                    <div class="span12" style="margin-top: 0;">
                        {{ wo_render_breadcrumbs() }}


                        <div class="breadcrumb">
                            <div class="row-fluid">
                                <div class="span3">
                                    Municipio
                                    <h3> {{ filtro.municipio.nombre }}</h3>
                                </div>
                                <div class="span3">Ubicación
                                    <h3> {{ filtro.ubicacion.referencia ~' - '~ filtro.ubicacion.ubicacion }}</h3>
                                </div>
                                <div class="span3">
                                    Tipo de Infracción
                                    <h3>{{ filtro.tipoInfraccion.nombre }}</h3>
                                </div>
                                <div class="span3">
                                    Fecha
                                    <h3>{{ filtro.fecha |date('d-m-Y') }}</h3>
                                </div>
                            </div>
                        </div>



                        {% for type, flashMessages in app.session.flashbag.all() %}
                            {% for flashMessage in flashMessages %}
                                <div class='alert alert-{{ type }}'>
                                    {{ flashMessage|trans({}, 'JordiLlonchCrudGeneratorBundle') }}
                                </div>
                            {% endfor %}
                        {% endfor %}
                    </div>
                </div>

                {% if form_errors(filterForm) %}
                    <div class="alert alert-block alert-error fade in form-errors">
                        {{ form_errors(filterForm) }}
                    </div>
                {% endif %}
                &nbsp;

                <div id="filters" class="collapse">
                    <form class="well" action="{{ path('infraccion') }}"
                          method="post" {{ form_enctype(filterForm) }}>
                        {{ form_row(filterForm.dominio) }}

                        {{ form_row(filterForm.etapa) }}

                        {{ form_rest(filterForm) }}

                        <p>
                            <button type="submit" name="filter_action"
                                    value="reset">{{ 'views.index.reset'|trans({}, 'JordiLlonchCrudGeneratorBundle') }}</button>
                            <button type="submit" name="filter_action"
                                    value="filter">{{ 'views.index.filter'|trans({}, 'JordiLlonchCrudGeneratorBundle') }}</button>
                        </p>
                    </form>
                </div>

                <div class="row-fluid" style="margin-top: 0;">
                    <div class="span12" style="zoom: 1; overflow: auto; margin-top: -8px;">

                        <table class="table table-striped table-bordered table-condensed">
                            <thead>
                            <tr>

                                {#<th>Ubicacion</th>#}
                                {#<th>Infraccion</th>#}
                                <th>Dominio</th>
                                <th>Hora</th>
                                <th>Datos</th>
                                <th>Foto 1</th>
                                {% if filtro.tipoInfraccion.cantidadFoto >= 2 %}
                                    <th>Foto 2</th>
                                {% endif %}
                                {% if filtro.tipoInfraccion.cantidadFoto == 3 %}
                                    <th>Foto 3</th>
                                {% endif %}
                                <th>Etapa</th>


                                <th>{{ 'views.index.actions'|trans({}, 'JordiLlonchCrudGeneratorBundle') }}</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for entity in entities %}

                            <tr>
                                {#<td>#}
                                {#&#123;&#35;<a href="{{ path('infraccion_show', { 'id': entity.id }) }}">{{ entity.codigo }}</a>&#35;&#125;#}
                                {#{{ entity.municipio }}#}
                                {#</td>#}
                                {#<td>{{ entity.tipoInfraccion }}</td>#}
                                <td style="width: 80px;"><span
                                            style="font-size: 24px; color: #802420; font-weight: bold   ">  {{ entity.dominio }} </span>
                                </td>
                                <td style="width: 60px;">{% if entity.fecha %}{{ entity.fecha|date('H:i:s') }}{% endif %}</td>
                                <td style="width: 300px;">
                                    <div class="row-fluid">
                                        <div class="span4">Marca:</div>
                                        <div class="span8">{{ entity.automotor.marca | default("-") }}</div>
                                    </div>
                                    <div class="row-fluid">
                                        <div class="span4">Modelo:</div>
                                        <div class="span8">{{ entity.automotor.modelo | default("") }}</div>
                                    </div>
                                    <div class="row-fluid">
                                        <div class="span4">DNI/CUIT:</div>
                                        <div class="span8">{{ entity.automotor.dni | default("-") ~ '/' ~ entity.automotor.cuitCuil | default("-") }}</div>
                                    </div>
                                    <div class="row-fluid">
                                        <div class="span4">Rz. Social:</div>
                                        <div class="span8">{{ entity.automotor.nombre | default("") }}</div>
                                    </div>
                                    <div class="row-fluid">
                                        <div class="span4">Domicilio:</div>
                                        <div class="span8">{{ entity.automotor.domicilio | default("") }}</div>
                                    </div>
                                    <div class="row-fluid">
                                        <div class="span4">Localidad:</div>
                                        <div class="span8">{{ entity.automotor.localidad | default("") }}</div>
                                    </div>
                                    <div class="row-fluid">
                                        <div class="span4">Cod. Postal:</div>
                                        <div class="span8">{{ entity.automotor.codigoPostal | default("") }}</div>
                                    </div>
                                    <div class="row-fluid">
                                        <div class="span4">Provincia:</div>
                                        <div class="span8">{{ entity.automotor.provincia | default("") }}</div>
                                    </div>
                                    <div class="row-fluid">
                                        <div class="span4">Actualización:</div>
                                        <div class="span8">{{ entity.automotor.ultimaActualizacion | default("") | date("d-m-Y") }}</div>
                                    </div>

                    </div>

                    </td>
                    <td>
                        <img src="{{ asset(infraccion.infracciones.dir~ entity.fecha| date('Ym') ~ '/' ~ entity.foto1) }}"
                             style="width: 250px;"/></td>
                    {% if filtro.tipoInfraccion.cantidadFoto >= 2 %}
                        <td>
                            <img src="{{ asset(infraccion.infracciones.dir ~ entity.fecha| date('Ym') ~ '/' ~ entity.foto2) }}"
                                 style="width: 250px;"/></td>
                    {% endif %}
                    {% if filtro.tipoInfraccion.cantidadFoto == 3 %}
                        <td>
                            <img src="{{ asset(infraccion.infracciones.dir ~ entity.fecha| date('Ym') ~ '/' ~ entity.foto3) }}"
                                 style="width: 250px;"/></td>
                    {% endif %}
                    <td>{{ entity.etapa }}</td>

                    <td>
                        <a class="btn btn-mini"
                           href="{{ path('infraccion_show', { 'id': entity.id }) }}">
                            {{ 'views.actions.show'|trans({}, 'JordiLlonchCrudGeneratorBundle') }}
                        </a>
                        <a class="btn btn-mini"
                           href="{{ path('infraccion_edit', { 'id': entity.id }) }}">
                            {{ 'views.actions.edit'|trans({}, 'JordiLlonchCrudGeneratorBundle') }}
                        </a></td>
                    </tr>
                    {% endfor %}
                    </tbody>
                    </table>
                </div>
                </div>

                <div class="row-fluid">

                    <div class="span10">
                        {{ pagerHtml|raw }}
                    </div>

                    <div class="span2">
                        <a class="btn btn-primary likepaginator" href="{{ path('infraccion_new') }}">
                            {{ 'views.index.createnew'|trans({}, 'JordiLlonchCrudGeneratorBundle') }} Infraccion
                        </a>
                    </div>
                </div>

            {% endblock box_contenido %}
        {% endembed %}


        </section>


    {% endblock %}