{% extends '::layout.html.twig' %}
{% block id 'mod_Municipio' %}
    {% block title %}
        {{ parent() }} - Fechas de Infracciones
    {% endblock %}

    {% block page %}

        <section id="Municipio">
            {% form_theme filterForm with ['LexikFormFilterBundle:Form:form_div_layout.html.twig' ] %}

            {% embed 'box.html.twig' with {'box_titulo': 'Fechas de Infracciones' } %}
                {% block rigth_title %}
                    <a class="btn dropdown-toggle btn-mini" data-toggle="collapse"
                       data-target="#filters">
                        {{ 'views.index.filters'|trans({}, 'JordiLlonchCrudGeneratorBundle') }}
                        <span class="caret"></span>
                    </a> &nbsp;
                {% endblock %}

                {% block box_contenido %}
                    <div class="row-fluid">
                        <div class="span12" style="margin-top: 0;">
                            {{ wo_render_breadcrumbs() }}

                            {% for type, flashMessages in app.session.flashbag.all() %}
                                {% for flashMessage in flashMessages %}
                                    <div class='alert alert-{{ type }}'>
                                        {{ flashMessage|trans({}, 'JordiLlonchCrudGeneratorBundle') }}
                                    </div>
                                {% endfor %}
                            {% endfor %}
                        </div>
                    </div>

                    {% if form_errors(filterForm) %}
                        <div class="alert alert-block alert-error fade in form-errors">
                            {{ form_errors(filterForm) }}
                        </div>
                    {% endif %}
                    &nbsp;

                    {#<div id="filters" class="collapse">#}
                    {#<form class="well" action="{{ path('municipio') }}"#}
                    {#method="post" {{ form_enctype(filterForm) }}>#}
                    {#{{ form_row(filterForm.codigo) }}#}
                    {#{{ form_row(filterForm.nombre) }}#}
                    {#{{ form_row(filterForm.email) }}#}
                    {#{{ form_row(filterForm.localidad) }}#}
                    {#{{ form_row(filterForm.cont1Nombre) }}#}

                    {#{{ form_rest(filterForm) }}#}

                    {#<p>#}
                    {#<button type="submit" name="filter_action"#}
                    {#value="reset">{{ 'views.index.reset'|trans({}, 'JordiLlonchCrudGeneratorBundle') }}</button>#}
                    {#<button type="submit" name="filter_action"#}
                    {#value="filter">{{ 'views.index.filter'|trans({}, 'JordiLlonchCrudGeneratorBundle') }}</button>#}
                    {#</p>#}
                    {#</form>#}
                    {#</div>#}


                    <div class="row-fluid" style="margin-top: 0;">
                        <div class="span12" style="zoom: 1; overflow: auto; margin-top: -8px;">

                            <table class="table table-striped table-bordered table-condensed">
                                <thead>
                                <tr>
                                    <th>Fecha</th>
                                    <th>Municipio</th>
                                    <th>Ubicacion</th>
                                    <th>Infraccion</th>
                                    <th>Registros</th>
                                    <th>Acci√≥n</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for entity in entities %}
                                    <tr>
                                        {#<td>#}
                                        {#<a href="{{ path('municipio_show', { 'id': entity.id }) }}">{{ entity.codigo }}</a>#}
                                        {#</td>#}
                                        <td>{{ entity.fecha |date('d/m/Y') }}</td>
                                        <td>{{ entity.municipio }}</td>
                                        <td>{{ entity.ubicacion }}</td>
                                        <td>{{ entity.infraccion }}</td>
                                        <td>{{ entity.reg }}</td>
                                        <td>
                                            <a class="btn_selecciona btn btn-primary" href="#"
                                               data-municipio="{{ entity.municipio_id }}"
                                               data-ubicacion="{{ entity.ubicacion_id }}"
                                               data-infraccion="{{ entity.tipo_infraccion_id }}"
                                               data-fecha-anio="{{ entity.fecha |date('Y') }}"
                                               data-fecha-mes="{{ entity.fecha |date('m') }}"
                                               data-fecha-dia="{{ entity.fecha |date('d') }}"
                                            >
                                            Seleccionar
                                            </a>
                                        </td>

                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="row-fluid">

                        <div class="span10">
                            {{ pagerHtml|raw }}
                        </div>


                    </div>

                {% endblock box_contenido %}
            {% endembed %}


        </section>

        <script>
            $(document).ready(function(e){
                $(".btn_selecciona").click(function(){
                    muni = $(this).data("municipio");
                    ubic = $(this).data("ubicacion");
                    infra = $(this).data("infraccion");
                    anio = $(this).data("fecha-anio");
                    mes = $(this).data("fecha-mes");
                    dia = $(this).data("fecha-dia");

                    alert(dia);
                });
            });

        </script>

    {% endblock %}